import os
import scapy.all as scapy

os.system('ip netns del h1 > /dev/null')
os.system('ip netns del h2 > /dev/null')
os.system('ip netns del h3 > /dev/null')
os.system('ip netns add h1 > /dev/null')
os.system('ip netns add h2 > /dev/null')
os.system('ip netns add h3 > /dev/null')
os.system('echo 1 > /proc/sys/net/ipv4/ip_forward')


h1::VPort(ifname='h1-0', netns='/var/run/netns/h1', loopback=True,
			   mac_addr='00:00:00:00:00:01', ip_addrs=['10.0.1.1/24'])
h2::VPort(ifname='h2-0', netns='/var/run/netns/h2', loopback=True,
			   mac_addr='00:00:00:00:00:02', ip_addrs=['10.0.2.1/24'])
h3::VPort(ifname='h3-0', netns='/var/run/netns/h3', loopback=True,
			   mac_addr='00:00:00:00:00:03', ip_addrs=['10.0.3.1/24'])

os.system('ip netns exec h1 ifconfig lo up > /dev/null')
os.system('ip netns exec h2 ifconfig lo up > /dev/null')
os.system('ip netns exec h3 ifconfig lo up > /dev/null')

PortInc(port=h1) -> PortOut(port=h2)
PortInc(port=h2) -> PortInc(port=h1)